@page "/DataGrid"
@using RazorSharp.Components.Data

<PageTitle>DataGrid</PageTitle>

<DataGrid DataSource="@People">
    <GridOptions>
        <GridRowsVirtualizeOptions />
    </GridOptions>
    <GridColumns>
        <GridColumn>Id</GridColumn>
        <GridColumn>
            <ActionTemplate>
                <GridEditButton TItem="Person" OnEdit="@EditHandler" />
            </ActionTemplate>
        </GridColumn>
        <GridColumn>First Name</GridColumn>
        <GridColumn>Last Name</GridColumn>
        <GridColumn>Age</GridColumn>
        <GridColumn>Has Children</GridColumn>
        <GridColumn>
            <ActionTemplate>
                <GridSaveButton />
                <GridCancelButton />
            </ActionTemplate>
        </GridColumn>
    </GridColumns>
    <GridRows>
        <GridRow>
            <GridCell>26</GridCell>
            <GridCell>&nbsp;</GridCell>
            <GridCell>Stephani</GridCell>
            <GridCell>Juszczak</GridCell>
            <GridCell>33</GridCell>
        </GridRow>
        <GridRow>
            <GridCell>37</GridCell>
            <GridCell>&nbsp;</GridCell>
            <GridCell>Jodie</GridCell>
            <GridCell>Bisp</GridCell>
            <GridCell>63</GridCell>
        </GridRow>
    </GridRows>
</DataGrid>

@code {

    public async ValueTask EditHandler(Person item)
    {
        Console.WriteLine($"Clicked at #{item.Id}");

        await ValueTask.CompletedTask;
    }

    private ICollection<Person?> People { get; } = new[]
    {
        new Person(1, "Morton", "Scarlon", 38, true),
        new Person(2, "Shannan", "Targett", 10, false),
        new Person(3, "Raimundo", "Keitley", 3, false),
        null,
        new Person(4, "Ronica", "Wemes", 38, true),
        new Person(5, "Elana", "Riggey", 14, false),
        new Person(6, "Bari", "Iiannone", 37, true),
        new Person(7, "Emmaline", null, 15, false),
        new Person(8, "Ravid", "Riches", 62, true),
        new Person(9, "Elton", "Lettson", 47, false),
        new Person(10, "Caprice", "Poschel", 51, true)
    };

    public record Person(
        int Id,
        string FirstName,
        string? LastName,
        int Age,
        bool HasChildren);

}